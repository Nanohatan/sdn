<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>動画検索</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="http://192.168.98.25:8080/static/css/navibar.css">
</head>
<style>
    #search_box{
      text-align: center;
    }

    input {
      width: 50%;
      padding: 10px 20px;
      margin: 10px 0;
      box-sizing: border-box;
      font-size: 15px;
      }
      button {
        font-size: 30px;
      }

</style>

<body>

<!-- navigation bar -->
<div class="navbar">
  <a href="/auth/login" >時間割</a>
  <a href="/search/">授業検索</a>
</div>

<!-- input for serching -->
<div id="search_box">
  <h1>講義検索</h1>
  <form action="">
    <input type="text" id="video_search" name="video_search" >
    <button type="submit" id="button"><i class="fa fa-search"></i></button>
  </form>
</div>
<div class="class-list">
<style>
  .class-list{
    border-style: dashed;
    border-color: black;
}

.class-video{
    margin: 10px;
    height: 20%;
    border-style: dashed;
    border-color: green;
}
</style>
</div>


<script>
var classes = <%- JSON.stringify(class_name) %>
console.log(classes);
create_list(classes);


//検索ボタンがクリックされたら文字列を含む講義名のみ表示する．
document.getElementById("button").onclick = function() {
  str = '/'+document.getElementById("video_search").value+'/';
  jobj = []
  classes.forEach(function(cl){
    if ( cl.match(str)) {
      jobj.push(cl);
    };
  });
  create_list(jobj);
};

function create_list(jobj){
  jobj.forEach(function(jd){
    let currentDiv=document.getElementsByClassName("class-list")[0];
    let newDiv=document.createElement('div');
    let newa=document.createElement('a');
    let newh2=document.createElement('h2');
    let newPara=document.createElement('p');
    newDiv.className ="class-video";

    currentDiv.appendChild(newDiv);
    newa.href="search/class/"+jd;
    newDiv.appendChild(newa);
    newPara.textContent=jd;
    newa.appendChild(newh2);
    newa.appendChild(newPara);
  });
}
</script>



</body>
</html>

