<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <title>user page</title>
    <!-- javascript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


</head>
<body>
<%- include('./header', {role:role}) %>
<div id="search_box">
    <h1>講義検索</h1>
    <form >
        <input type="text" id="video_search" name="video_search" >
        <button type="button" id="button"><i class="fa fa-search"></i></button>
    </form>
</div>
<div class="class-list" style="margin-top: 50p　border-left:thick solid red; padding-left: 10px;">
</div>

<script>
    var classes = <%- JSON.stringify(class_name) %>
        console.log(classes);
    create_list(classes);


    //検索ボタンがクリックされたら文字列を含む講義名のみ表示する．
    //document.getElementById("button").onclick = function() {
    $('#button').on('click', function(){
        $('.class-list').empty();
        str = document.getElementById("video_search").value;
        jobj = [];
        classes.forEach(function(cl){
            console.log(cl);
            console.log(str);
            if ( cl.includes(str)) {
                jobj.push(cl);
            };
        });
        create_list(jobj);
    });

    function create_list(jobj){
        jobj.forEach(function(jd){
            let currentDiv=document.getElementsByClassName("class-list")[0];
            let newDiv=document.createElement('div');
            let newa=document.createElement('a');
            let newh2=document.createElement('h2');
            let newPara=document.createElement('p');
            newDiv.className ="class-video";

            currentDiv.appendChild(newDiv);
            newa.href="/search/class/"+jd;
            newDiv.appendChild(newa);
            newPara.textContent=jd;
            newa.appendChild(newh2);
            newa.appendChild(newPara);
        });
    }
</script>


</body>
<style>
    #search_box{
        text-align: center;
    }

    input {
        width: 50%;
        padding: 10px 20px;
        margin: 10px 0;
        box-sizing: border-box;
        font-size: 15px;
    }
    button {
        font-size: 30px;
    }
    /*.class-list{*/
    /*    border-style: dashed;*/
    /*    border-color: black;*/
    /*}*/

    .class-list{
        padding-left: 600px;
        padding-right: 600px;
    }

    /*.class-video{*/
    /*    margin: 10px;*/
    /*    height: 20%;*/
    /*    border-style: dashed;*/
    /*    border-color: green;*/
    /*    background-color: #E6F2FF;*/
    /*}*/

    .class-video {
        position: relative;
        list-style-type: none!important;/*ポチ消す*/
        padding: 0.5em 0.5em 0.5em 0.5em;
        margin-bottom: 5px;
        line-height: 1.5;
        background: #dbebf8;
        vertical-align: middle;
        color: #505050;
        border-radius: 15px 0px 0px 15px;/*左側の角丸く*/
    }

    .class-video:before{
        display:inline-block;
        vertical-align: middle;
        /*以下白丸つくる*/
        content:'';
        width:1em;
        height: 1em;
        background: #fff;
        border-radius: 50%;
        margin-right: 8px;
        text-align: left;
    }

</style>
</html>